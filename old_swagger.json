{
  "openapi": "3.0.3",
  "info": {
    "title": "SyncFully",
    "version": "1.0.0",
    "description": "SyncFully API allows users to register, manage their accounts, and get personalized recommendations to view new works (movies, series, books, etc.)\n"
  },
  "tags": [
    {
      "name": "users",
      "description": "Operations related to user account creation, retrieval, update, and deletion"
    },
    {
      "name": "works",
      "description": "Manage works (e.g., books, movies, music albums)"
    }
  ],
  "paths": {
    "/users": {
      "post": {
        "summary": "Register a new user",
        "description": "Creates a new user account with username, email, and password.",
        "tags": [
          "users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBadRequestResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Retrieve all users",
        "description": "Returns a list of all registered users.",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "A list of users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/User"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}": {
      "parameters": [
        {
          "name": "userId",
          "in": "path",
          "required": true,
          "description": "Unique ID of the user",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "get": {
        "summary": "Retrieve a specific user's info",
        "description": "Returns information about a specific registered user.",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "User found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorNotFoundResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a specific user's info",
        "description": "Updates information for the user with the given ID.",
        "tags": [
          "users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User information updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorNotFoundResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a specific user",
        "description": "Permanently deletes the user with the given ID.",
        "tags": [
          "users"
        ],
        "responses": {
          "204": {
            "description": "User deleted successfully"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorNotFoundResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}/ratings": {
      "parameters": [
        {
          "name": "userId",
          "in": "path",
          "required": true,
          "description": "Unique ID of the user",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "get": {
        "summary": "Retrieve all rated works for the current user",
        "description": "Retrieve all rated works for the current user.",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "Map of work IDs to user ratings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/components/schemas/Rating"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Rate a work",
        "description": "Adds a new rating from a user to a work.",
        "tags": [
          "users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Rating"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Work rated succesfully"
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorBadRequestResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}/recommendations": {
      "parameters": [
        {
          "name": "userId",
          "in": "path",
          "required": true,
          "description": "Unique ID of the user",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "get": {
        "summary": "Retrieve categorized Work recommendations for the user",
        "description": "Returns three recommendation lists named \"current\", \"profile\", and \"following\", providing recommendations based on what the title suggests.",
        "tags": [
          "users"
        ],
        "responses": {
          "200": {
            "description": "Categorized Work recommendations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "current": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Work"
                      }
                    },
                    "profile": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Work"
                      }
                    }
                  },
                  "required": [
                    "current",
                    "profile"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorNotFoundResponse"
                }
              }
            }
          }
        }
      }
    },
    "/works/{workId}": {
      "parameters": [
        {
          "name": "workId",
          "in": "path",
          "description": "ID of the work in the shelf",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        }
      ],
      "get": {
        "summary": "Retrieve a specific work from a shelf",
        "description": "Returns details about a work located in a specific shelf.",
        "tags": [
          "works"
        ],
        "responses": {
          "200": {
            "description": "Work found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "works": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Work"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/works/{workId}/ratings": {
      "parameters": [
        {
          "name": "workId",
          "in": "path",
          "description": "ID of the work to retrieve or post ratings for",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        }
      ],
      "get": {
        "summary": "Retrieve ratings for a work",
        "description": "Returns all user ratings for the specified work.",
        "tags": [
          "works"
        ],
        "responses": {
          "200": {
            "description": "List of ratings for the work",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ratings": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Rating"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Submit a rating for a work",
        "description": "Allows a user to submit a new rating for the specified work.",
        "tags": [
          "works"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Rating"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rating submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Rating"
                }
              }
            }
          },
          "400": {
            "description": "Invalid rating input"
          },
          "404": {
            "description": "Work not found"
          }
        }
      }
    },
    "/works/{workId}/similar": {
      "parameters": [
        {
          "name": "workId",
          "in": "path",
          "description": "ID of the work in the shelf",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        }
      ],
      "get": {
        "summary": "Retrieve simillar works",
        "description": "Returns a list of similar works.",
        "tags": [
          "works"
        ],
        "responses": {
          "200": {
            "description": "Work found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "works": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Work"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/works/popular": {
      "get": {
        "summary": "Retrieve this week's popular Works",
        "description": "Retrieve this week's popular Works.",
        "tags": [
          "works"
        ],
        "responses": {
          "200": {
            "description": "Works found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "works": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Work"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/ratings/{ratingId}": {
      "parameters": [
        {
          "name": "ratingId",
          "in": "path",
          "description": "ID of the rating",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        }
      ],
      "get": {
        "summary": "Retrieve a specific rating",
        "description": "Returns a rating identified by its ID.",
        "tags": [
          "ratings"
        ],
        "responses": {
          "200": {
            "description": "Rating retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Rating"
                }
              }
            }
          },
          "404": {
            "description": "Rating not found"
          }
        }
      },
      "put": {
        "summary": "Update a rating",
        "description": "Updates the score of the specified rating.",
        "tags": [
          "ratings"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "score"
                ],
                "properties": {
                  "score": {
                    "type": "number",
                    "format": "float",
                    "minimum": 0,
                    "maximum": 10,
                    "description": "Updated rating score",
                    "example": 7.5
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rating updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Rating"
                }
              }
            }
          },
          "400": {
            "description": "Invalid update input"
          },
          "404": {
            "description": "Rating not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a rating",
        "description": "Removes the specified rating from the system.",
        "tags": [
          "ratings"
        ],
        "responses": {
          "204": {
            "description": "Rating deleted successfully"
          },
          "404": {
            "description": "Rating not found"
          }
        }
      }
    },
    "/search": {
      "get": {
        "summary": "Search items using query parameters",
        "parameters": [
          {
            "in": "query",
            "name": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search term"
          },
          {
            "in": "query",
            "name": "item-type",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter results based on the type of item (user, work, shelf)."
          },
          {
            "name": "work-type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "book",
                "graphic-novel",
                "series",
                "movie",
                "music"
              ]
            },
            "description": "Filter results based on the type of work (e.g., book, movie, series, music)."
          },
          {
            "name": "genre",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Filter by genre (e.g., Drama, Sci-fi, Comedy)."
          },
          {
            "name": "rating",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "float"
            },
            "description": "Minimum average rating to include as a lower limit"
          },
          {
            "name": "year",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1960,
              "maximum": 2025
            },
            "description": "Filter works released in a specific year."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful search response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total": {
                      "type": "integer",
                      "description": "Total number of matching items"
                    },
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Item"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "required": [
          "userId",
          "username",
          "email"
        ],
        "properties": {
          "userId": {
            "type": "integer",
            "example": 42
          },
          "username": {
            "type": "string",
            "example": "spiros"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "spiros@example.com"
          },
          "profilePictureUrl": {
            "type": "string",
            "format": "uri",
            "example": "https://example.com/uploads/profiles/123.jpg"
          },
          "ratedWorks": {
            "type": "integer",
            "example": 512
          }
        }
      },
      "UserInput": {
        "type": "object",
        "required": [
          "username",
          "email",
          "password"
        ],
        "properties": {
          "username": {
            "type": "string",
            "example": "spiros"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "spiros@example.com"
          },
          "password": {
            "type": "string",
            "format": "password",
            "example": "verysecretpassword"
          },
          "profilePictureUrl": {
            "type": "string",
            "format": "uri",
            "example": "https://example.com/uploads/profiles/123.jpg"
          }
        }
      },
      "Rating": {
        "type": "object",
        "required": [
          "score",
          "workId",
          "userId",
          "ratedAt"
        ],
        "properties": {
          "score": {
            "type": "number",
            "minimum": 0.5,
            "maximum": 5,
            "example": 4.5
          },
          "ratedAt": {
            "type": "string",
            "format": "date-time",
            "example": "2025-06-03T14:23:45Z"
          },
          "userId": {
            "type": "integer",
            "example": 42
          },
          "workId": {
            "type": "integer",
            "example": 42
          }
        }
      },
      "Work": {
        "type": "object",
        "required": [
          "workId",
          "title"
        ],
        "properties": {
          "workId": {
            "type": "integer",
            "description": "Unique identifier of the work",
            "example": 42
          },
          "title": {
            "type": "string",
            "description": "Title of the work",
            "example": "The Catcher in the Rye"
          },
          "description": {
            "type": "string",
            "description": "Short summary or abstract of the work",
            "example": "A story about teenage angst and alienation."
          },
          "type": {
            "type": "string",
            "description": "Type of the work (media category)",
            "enum": [
              "movie",
              "series",
              "music",
              "book"
            ],
            "example": "book"
          },
          "year": {
            "type": "integer",
            "description": "Year of release or publication",
            "example": 1951
          },
          "genres": {
            "type": "array",
            "description": "List of genre tags",
            "items": {
              "type": "string"
            },
            "example": [
              "Drama",
              "Coming-of-age"
            ]
          },
          "creator": {
            "type": "string",
            "description": "Primary creator of the work",
            "example": "J.D. Salinger"
          },
          "rating": {
            "type": "number",
            "format": "float",
            "description": "Average rating of the work (e.g., from users)",
            "example": 4.3
          },
          "coverUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the workâ€™s cover image",
            "example": "https://example.com/covers/catcher.jpg"
          },
          "foundAt": {
            "type": "string",
            "format": "url",
            "description": "Places where a user can find the work",
            "example": "https://amazon.com/lord-of-the-rings"
          }
        }
      },
      "Item": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Unique identifier for the item",
            "example": 42
          },
          "name": {
            "type": "string",
            "description": "Name of the item",
            "example": "Lord of the Rings: Retun of the King"
          },
          "category": {
            "type": "string",
            "description": "Category of the item",
            "example": "book"
          }
        }
      },
      "ErrorBadRequestResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "Bad request"
          },
          "code": {
            "type": "integer",
            "example": 400
          }
        }
      },
      "ErrorNotFoundResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "Not found"
          },
          "code": {
            "type": "integer",
            "example": 404
          }
        }
      }
    }
  }
}